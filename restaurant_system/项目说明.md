# 餐饮点单系统 - Python实现

基于UML设计图实现的完整餐饮点单系统

## 📊 项目统计

- **总代码量**: 499行（不含注释和空行约380行）
- **开发语言**: Python 3.8+
- **GUI框架**: Tkinter（Python内置）
- **架构模式**: 四层分层架构 + Repository模式

## 🏗️ 系统架构

### 四层架构设计

```
┌─────────────────────────────────────────┐
│        表现层 (Presentation)            │
│    CustomerGUI | AdminGUI               │
├─────────────────────────────────────────┤
│        业务服务层 (Service)             │
│    MenuService | OrderService           │
├─────────────────────────────────────────┤
│        仓储层 (Repository)              │
│  MenuRepository | OrderRepository       │
│  InMemoryMenuRepo | InMemoryOrderRepo   │
├─────────────────────────────────────────┤
│        领域模型层 (Domain)              │
│  MenuItem | Cart | Order | OrderStatus  │
└─────────────────────────────────────────┘
```

## 📁 项目结构

```
restaurant_system/
├── domain/
│   ├── __init__.py
│   └── models.py              (88行)  领域模型
├── repositories/
│   ├── __init__.py
│   └── repository.py          (80行)  数据仓储
├── services/
│   ├── __init__.py
│   └── services.py            (63行)  业务服务
├── presentation/
│   ├── __init__.py
│   └── gui.py                 (210行) GUI界面
├── main.py                    (58行)  程序入口
├── requirements.txt                    依赖说明
├── README.md                           使用说明
└── 项目说明.md                         本文件
```

## ✨ 功能特性

### 顾客端功能
- ✅ 浏览可用菜单
- ✅ 添加商品到购物车
- ✅ 管理购物车（增删商品）
- ✅ 查看购物车总价
- ✅ 结算下单

### 管理员端功能
- ✅ 菜单管理（添加菜品）
- ✅ 商品上下架管理
- ✅ 查看订单列表
- ✅ 订单状态处理（待处理→制作中→已完成）

## 🎯 UML设计实现对照

### 类图实现
| UML类 | Python实现 | 代码位置 |
|-------|-----------|---------|
| MenuItem | MenuItem类 | domain/models.py |
| Cart | Cart类 | domain/models.py |
| CartItem | CartItem类 | domain/models.py |
| Order | Order类 | domain/models.py |
| OrderStatus | OrderStatus枚举 | domain/models.py |
| MenuService | MenuService类 | services/services.py |
| OrderService | OrderService类 | services/services.py |
| MenuRepository | MenuRepository接口 | repositories/repository.py |
| OrderRepository | OrderRepository接口 | repositories/repository.py |

### 用例图实现
| 用例 | 实现方式 |
|-----|---------|
| 浏览菜单 | CustomerGUI.refresh_menu() |
| 管理购物车 | Cart类的add_item/remove_item方法 |
| 结算下单 | CustomerGUI.checkout() + OrderService.create_order() |
| 管理菜单 | AdminGUI.add_menu_item() + MenuService |
| 管理上下架 | AdminGUI.toggle_item() + MenuService.toggle_availability() |
| 查看订单 | AdminGUI.refresh_orders() |
| 处理订单 | AdminGUI.update_status() + OrderService.update_order_status() |

### 序列图实现
顾客下单流程完整实现：
1. 顾客 → GUI: 打开应用
2. GUI → MenuService: getAvailableItems()
3. MenuService → MenuRepository: findAll()
4. 返回菜单列表并显示
5. 顾客选择商品加入购物车
6. 顾客结算 → OrderService.createOrder()
7. 验证价格并保存订单

### 组件图实现
- **顾客GUI组件**: CustomerGUI类
- **管理员GUI组件**: AdminGUI类
- **菜单服务**: MenuService类
- **订单服务**: OrderService类
- **菜单仓储**: InMemoryMenuRepo类
- **订单仓储**: InMemoryOrderRepo类
- **内存存储**: Python字典（dict）

## 🔧 技术实现

### 设计模式
1. **Repository模式**: 数据访问抽象，便于替换存储方式
2. **Service层模式**: 封装业务逻辑
3. **依赖注入**: Service依赖Repository接口
4. **状态模式**: 订单状态管理

### 核心技术
- **数据类**: 使用@dataclass装饰器
- **类型提示**: 使用typing模块
- **精确货币计算**: 使用Decimal类型
- **接口抽象**: 使用ABC抽象基类

## 🚀 运行方式

```bash
# 进入项目目录
cd restaurant_system

# 运行程序
python main.py
```

运行后会出现主界面，选择"顾客端"或"管理员端"即可使用。

## 💡 设计亮点

1. **完全符合UML设计**: 严格按照类图、用例图、序列图、组件图实现
2. **分层架构清晰**: 四层分离，职责明确
3. **易于扩展**: Repository接口设计，可轻松替换为数据库存储
4. **代码精简**: 499行实现完整功能
5. **内置依赖**: 无需安装第三方包，开箱即用

## 📝 代码质量

- ✅ 类型提示完整
- ✅ 文档字符串清晰
- ✅ 命名规范统一
- ✅ 单一职责原则
- ✅ 依赖倒置原则
- ✅ 开闭原则

## 🔄 扩展方向

如需扩展功能，建议：

1. **数据持久化**: 实现SQLiteMenuRepo和SQLiteOrderRepo
2. **商品自定义**: 添加CustomizationOption功能
3. **用户认证**: 添加用户登录系统
4. **订单详情**: 增强订单查看功能
5. **统计报表**: 添加销售统计功能

## 📄 文件说明

### 核心文件

**domain/models.py** (88行)
- MenuItem: 菜单项实体
- Cart: 购物车实体
- CartItem: 购物车项实体
- Order: 订单实体
- OrderStatus: 订单状态枚举

**repositories/repository.py** (80行)
- MenuRepository: 菜单仓储接口
- OrderRepository: 订单仓储接口
- InMemoryMenuRepo: 内存菜单仓储实现
- InMemoryOrderRepo: 内存订单仓储实现

**services/services.py** (63行)
- MenuService: 菜单业务服务
- OrderService: 订单业务服务

**presentation/gui.py** (210行)
- CustomerGUI: 顾客端界面
- AdminGUI: 管理员端界面

**main.py** (58行)
- 应用入口
- 初始化示例数据
- 启动GUI界面

## ✅ 验收清单

- [x] 领域模型层完整实现
- [x] 仓储层接口与实现
- [x] 业务服务层逻辑正确
- [x] 顾客端GUI功能完整
- [x] 管理员端GUI功能完整
- [x] 代码量控制在500行左右
- [x] 符合UML设计图
- [x] 分层架构清晰
- [x] 设计模式应用得当
- [x] 可直接运行

---

**开发日期**: 2025年11月13日  
**开发语言**: Python 3.8+  
**总代码量**: 499行  
**架构模式**: 四层架构 + Repository模式


